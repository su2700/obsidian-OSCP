**AS-REP Roasting** æ˜¯ä»€ä¹ˆã€‚

---

## ä¸€å¥è¯è§£é‡Šï¼ˆå…ˆè®°ä½è¿™ä¸ªï¼‰

> **AS-REP Roasting** æ˜¯ä¸€ç§ **åœ¨ Active Directory ä¸­ï¼Œä¸éœ€è¦ç™»å½•å‡­æ®ï¼Œå°±èƒ½è·å–å¯ç¦»çº¿ç ´è§£å¯†ç å“ˆå¸Œçš„æ”»å‡»æ–¹å¼**ã€‚

---

## æŠŠåå­—æ‹†å¼€å°±å…¨æ‡‚äº†

### 1ï¸âƒ£ **AS**

- **AS = Authentication Service**
    
- Kerberos çš„**è®¤è¯æœåŠ¡**
    
- è´Ÿè´£å‘æ”¾ **TGTï¼ˆç¥¨æ®æˆæƒç¥¨ï¼‰**
    

---

### 2ï¸âƒ£ **REP**

- **REP = Replyï¼ˆå›å¤ï¼‰**
    
- æŒ‡çš„æ˜¯ **AS-REP**
    
- ğŸ‘‰ åŸŸæ§ï¼ˆKDCï¼‰è¿”å›ç»™å®¢æˆ·ç«¯çš„**è®¤è¯å“åº”**
    

---

### 3ï¸âƒ£ **Roasting**

- é»‘å®¢æœ¯è¯­
    
- å«ä¹‰ï¼š  
    ğŸ‘‰ **æ‹¿åˆ°å¯ç¦»çº¿çˆ†ç ´çš„åŠ å¯†æ•°æ®**
    

---

## åˆåœ¨ä¸€èµ·æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

> **AS-REP Roasting**  
> = **æ‹¿åˆ° Kerberos è®¤è¯é˜¶æ®µï¼ˆAS é˜¶æ®µï¼‰çš„å“åº”ï¼ˆREPï¼‰ï¼Œå¹¶è¿›è¡Œç¦»çº¿å¯†ç ç ´è§£**

---

## ä¸ºä»€ä¹ˆèƒ½è¢«æ”»å‡»ï¼Ÿï¼ˆæ ¸å¿ƒåŸå› ï¼‰

### æ­£å¸¸ Kerberosï¼ˆå®‰å…¨ï¼‰

- ç”¨æˆ·è¯·æ±‚è®¤è¯æ—¶
    
- **å¿…é¡»å…ˆç”¨å¯†ç åŠ å¯†æ—¶é—´æˆ³ï¼ˆPre-Authenticationï¼‰**
    
- åŸŸæ§éªŒè¯æˆåŠŸæ‰è¿”å› AS-REP
    

### âŒ å¼±é…ç½®ç”¨æˆ·

- ç”¨æˆ·å±æ€§å¯ç”¨ï¼š
    
    `Do not require Kerberos preauthentication`
    
- ç»“æœï¼š
    
    - åŸŸæ§ **ä¸éªŒè¯å¯†ç **
        
    - **ç›´æ¥è¿”å› AS-REP**
        
    - AS-REP **ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿçš„ key åŠ å¯†**
        

âš ï¸ æ”»å‡»è€…å¯ä»¥ç›´æ¥æ‹¿è¿™ä¸ªæ•°æ®çˆ†ç ´å¯†ç 
```
GetNPUsers.py fusion.corp/ -dc-ip 10.10.10.10 -usersfile users.txt -no-pass

```

```
nxc ldap 10.10.10.10 -u users.txt -p '' --asreproast asrep.hash

```
```
Rubeus.exe asreproast /user:user1

```